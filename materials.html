<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–∏–∑–ú–∞—Ç–ò–Ω—Ñ–æ ü™ê</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Prism.js (–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–¥–∞) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <!-- MathJax (–§–æ—Ä–º—É–ª—ã) -->
    <script>
      window.MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js"></script>

    <!-- Vanilla Tilt (3D —ç—Ñ—Ñ–µ–∫—Ç) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>

    <style>
        :root {
            --glass-bg: rgba(255, 255, 255, 0.95);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-color: #2c3e50;
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            --card-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        [data-theme="dark"] {
            --glass-bg: rgba(30, 30, 40, 0.85);
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-color: #e0e0e0;
            --bg-gradient: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            min-height: 100vh;
            transition: background 0.5s ease;
            background-attachment: fixed;
        }

        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .material-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.25);
        }

        /* –ë–µ–π–¥–∂–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ */
        .subject-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .badge-math { background: rgba(255, 107, 107, 0.15); color: #ff6b6b; }
        .badge-cs { background: rgba(78, 205, 196, 0.15); color: #4ecdc4; }
        .badge-phys { background: rgba(69, 183, 209, 0.15); color: #45b7d1; }

        .hidden { display: none !important; }

        /* –ö–Ω–æ–ø–∫–∞ 3D */
        #btn3D { transition: all 0.3s ease; }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal-custom {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 1050;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-custom.active { display: flex; animation: fadeIn 0.3s ease; }
        .modal-content-custom {
            background: var(--glass-bg);
            width: 90%; max-width: 700px;
            max-height: 90vh; overflow-y: auto;
            border-radius: 20px; padding: 2rem;
            position: relative;
        }
        
        /* –°–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar navbar-expand-lg fixed-top glass-card mx-3 mt-3">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold d-flex align-items-center" href="#">
                <i class="bi bi-rocket-takeoff-fill me-2 text-primary"></i>
                –§–∏–∑–ú–∞—Ç–ò–Ω—Ñ–æ ü™ê
            </a>
            
            <div class="d-flex align-items-center gap-2">
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¢–µ–º—ã -->
                <button class="btn btn-sm btn-outline-secondary rounded-circle" onclick="toggleTheme()">
                    <i class="bi bi-moon-stars-fill" id="themeIcon"></i>
                </button>
                <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å 3D -->
                <button class="btn btn-sm btn-outline-primary rounded-circle" id="btn3D" onclick="toggle3D()" title="3D —ç—Ñ—Ñ–µ–∫—Ç">
                    <i class="bi bi-box-fill" id="icon3D"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container" style="margin-top: 100px; padding-bottom: 50px;">

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center mb-5">
            <h1 class="display-4 fw-bold mb-3">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–Ω–∞–Ω–∏–π</h1>
            <p class="lead opacity-75">–†–∞–∑–±–æ—Ä—ã –∑–∞–¥–∞—á, —à–ø–∞—Ä–≥–∞–ª–∫–∏ –∏ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è</p>
        </div>

        <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –∫–Ω–æ–ø–∫–∏ -->
        <div class="d-flex justify-content-center flex-wrap gap-2 mb-5" id="filterContainer">
            <button class="btn btn-outline-dark rounded-pill px-4 active filter-btn" data-filter="all">–í—Å–µ</button>
            <button class="btn btn-outline-danger rounded-pill px-4 filter-btn" data-filter="math">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</button>
            <button class="btn btn-outline-success rounded-pill px-4 filter-btn" data-filter="cs">–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</button>
            <button class="btn btn-outline-info rounded-pill px-4 filter-btn" data-filter="phys">–§–∏–∑–∏–∫–∞</button>
            
            <!-- –ö–Ω–æ–ø–∫–∞ –î–ó -->
            <button class="btn btn-primary rounded-pill px-4 ms-md-3" id="hw-toggle-btn" onclick="toggleHomeworkView()">
                <i class="bi bi-journal-text me-2"></i>–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ
            </button>
        </div>

        <!-- –õ–ï–ù–¢–ê –ù–û–í–û–°–¢–ï–ô -->
        <div id="feed-container" class="row">
            <div class="col-12 text-center py-5">
                <div class="spinner-border text-primary" role="status"></div>
                <p class="mt-2 text-muted">–ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –±–∞–∑—ã...</p>
            </div>
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ" -->
        <div id="loadMoreContainer" class="text-center mt-4 hidden">
            <button class="btn btn-outline-secondary px-5" onclick="renderNextBatch()">–ü–æ–∫–∞–∑–∞—Ç—å –µ—â–µ</button>
        </div>

        <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–ó (–°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div id="homework-container" class="container mt-4 hidden">
            <div id="tasksList">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <div>
                        <h3 class="mb-0">–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                        <p class="opacity-75 small mb-0">–ü—Ä–∏–≤–µ—Ç, <span id="userName">–£—á–µ–Ω–∏–∫</span>!</p>
                    </div>
                </div>
                <!-- –°—é–¥–∞ –≥—Ä—É–∑—è—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∏ –î–ó -->
                <div id="personal-homework-feed"></div>
            </div>
        </div>

    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–æ–≤–æ—Å—Ç–∏ -->
    <div class="modal-custom" id="newsModal" onclick="if(event.target === this) closeModal()">
        <div class="modal-content-custom">
            <button class="btn-close position-absolute top-0 end-0 m-3" onclick="closeModal()"></button>
            <div id="modalBody">
                <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è JS -->
            </div>
        </div>
    </div>

    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

    <!-- –í–ê–® –°–ö–†–ò–ü–¢ (–ü–æ–¥–∫–ª—é—á–∞–µ–º –≤ –∫–æ–Ω—Ü–µ!) -->
    <script src="main.js"></script>

</body>
</html>
